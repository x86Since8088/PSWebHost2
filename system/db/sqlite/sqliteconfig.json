{
  "tables": [
    {
      "name": "Users",
      "columns": [
        { "name": "ID", "type": "TEXT", "constraint": "PRIMARY KEY" },
        { "name": "UserID", "type": "TEXT", "constraint": "UNIQUE NOT NULL" },
        { "name": "Email", "type": "TEXT", "constraint": "UNIQUE NOT NULL" },
        { "name": "PasswordHash", "type": "TEXT", "constraint": "NOT NULL" }
      ]
    },
    {
      "name": "User_Data",
      "columns": [
        { "name": "ID", "type": "TEXT", "constraint": "NOT NULL" },
        { "name": "Name", "type": "TEXT", "constraint": "NOT NULL" },
        { "name": "Data", "type": "BLOB", "constraint": "" }
      ],
      "primary_key": ["ID", "Name"]
    },
    {
      "name": "LoginSessions",
      "columns": [
        { "name": "SessionID", "type": "TEXT", "constraint": "PRIMARY KEY" },
        { "name": "UserID", "type": "TEXT", "constraint": "NOT NULL" },
        { "name": "Provider", "type": "TEXT", "constraint": "" },
        { "name": "AuthenticationTime", "type": "INTEGER", "constraint": "NOT NULL" },
        { "name": "LogonExpires", "type": "INTEGER", "constraint": "NOT NULL" },
        { "name": "AuthenticationState", "type": "TEXT", "constraint": "" },
        { "name": "UserAgent", "type": "TEXT", "constraint": "" }
      ]
    },
    {
      "name": "User_Groups",
      "columns": [
        { "name": "GroupID", "type": "TEXT", "constraint": "PRIMARY KEY" },
        { "name": "Name", "type": "TEXT", "constraint": "UNIQUE" },
        { "name": "Updated", "type": "TEXT", "constraint": "" },
        { "name": "Created", "type": "TEXT", "constraint": "" }
      ]
    },
    {
      "name": "User_Groups_Map",
      "columns": [
        { "name": "UserID", "type": "TEXT", "constraint": "NOT NULL" },
        { "name": "GroupID", "type": "TEXT", "constraint": "NOT NULL" }
      ],
      "primary_key": ["UserID", "GroupID"]
    },
    {
      "name": "PSWeb_Roles",
      "columns": [
        { "name": "PrincipalID", "type": "TEXT", "constraint": "NOT NULL" },
        { "name": "PrincipalType", "type": "TEXT", "constraint": "NOT NULL" },
        { "name": "RoleName", "type": "TEXT", "constraint": "NOT NULL" }
      ],
      "primary_key": ["PrincipalID", "RoleName"]
    },
    {
        "name": "AuthenticationMethods",
        "columns": [
            {"name": "ID", "type": "INTEGER", "constraint": "PRIMARY KEY AUTOINCREMENT"},
            {"name": "UserID", "type": "TEXT", "constraint": "NOT NULL"},
            {"name": "Authentication_Method", "type": "TEXT", "constraint": "NOT NULL"},
            {"name": "Data", "type": "TEXT", "constraint": ""}
        ]
    },
    {
        "name": "CardSessions",
        "columns": [
            {"name": "CardGUID", "type": "TEXT", "constraint": "PRIMARY KEY"},
            {"name": "SessionID", "type": "TEXT", "constraint": ""},
            {"name": "UserID", "type": "TEXT", "constraint": ""},
            {"name": "DataBackend", "type": "TEXT", "constraint": ""},
            {"name": "CardDefinition", "type": "TEXT", "constraint": ""}
        ]
    },
    {
        "name": "auth_user_provider",
        "columns": [
            {"name": "UserID", "type": "TEXT", "constraint": ""},
            {"name": "UserName", "type": "TEXT", "constraint": ""},
            {"name": "provider", "type": "TEXT", "constraint": ""},
            {"name": "created", "type": "TEXT", "constraint": ""},
            {"name": "locked_out", "type": "INTEGER", "constraint": ""},
            {"name": "expires", "type": "TEXT", "constraint": ""},
            {"name": "enabled", "type": "INTEGER", "constraint": ""},
            {"name": "data", "type": "TEXT", "constraint": ""}
        ],
        "primary_key": ["UserID", "provider"]
    },
    {
        "name": "LastLoginAttempt",
        "columns": [
            {"name": "IPAddress", "type": "TEXT", "constraint": "PRIMARY KEY"},
            {"name": "Username", "type": "TEXT", "constraint": ""},
            {"name": "Time", "type": "TEXT", "constraint": ""},
            {"name": "UserNameLockedUntil", "type": "TEXT", "constraint": ""},
            {"name": "IPAddressLockedUntil", "type": "TEXT", "constraint": ""},
            {"name": "UserViolationsCount", "type": "INTEGER", "constraint": ""},
            {"name": "IPViolationCount", "type": "INTEGER", "constraint": ""}
        ]
    },
    {
        "name": "account_email_confirmation",
        "columns": [
            {"name": "email_request_guid", "type": "TEXT", "constraint": "PRIMARY KEY"},
            {"name": "email", "type": "TEXT", "constraint": ""},
            {"name": "request_date", "type": "TEXT", "constraint": ""},
            {"name": "response_date", "type": "TEXT", "constraint": ""},
            {"name": "request_ip", "type": "TEXT", "constraint": ""},
            {"name": "response_ip", "type": "TEXT", "constraint": ""},
            {"name": "request_session_id", "type": "TEXT", "constraint": ""},
            {"name": "response_session_id", "type": "TEXT", "constraint": ""}
        ]
    },
    {
        "name": "card_settings",
        "columns": [
            {"name": "endpoint_guid", "type": "TEXT", "constraint": ""},
            {"name": "user_id", "type": "TEXT", "constraint": ""},
            {"name": "created_date", "type": "TEXT", "constraint": ""},
            {"name": "last_updated", "type": "TEXT", "constraint": ""},
            {"name": "data", "type": "TEXT", "constraint": ""}
        ],
        "primary_key": ["endpoint_guid", "user_id"]
    }
  ]
}
